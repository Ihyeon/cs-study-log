# Chapter 02 - 데이터 분석을 위한 파이썬
## 📅 2025-10-07
### 1. 시퀀스 슬라이싱과 컴프리헨션
#### 리스트 슬라이싱
- 대상 리스트의 부분 리스트를 생성 또는 수정
- 문법 형식: 리스트이름[시작 인덱스: 끝 인덱스:간격]

```python
numbers = [10, 20, 30, 40, 50, 60, 70]

# 간격 생략 가능
# 0번 인덱스부터 3번 인덱스 직전까지 선택
subset1 = numbers[0:3]
print(subset1) # [10, 20, 30]

# 음수 인덱스: 뒤에서 3번째 요소부터 끝까지 선택
subset2 = numbers[-3:]
print(subset2) # [50, 60, 70]

# 시작과 끝 인덱스는 생략 가능
# 전체 리스트에서 처음부터 2칸씩 건너뛰며 요소를 선택
list1 = numbers[::2] 
print(list1) # [10, 30, 50, 70]

# 간격을 -1로 주어 리스트의 모든 요소를 역순으로 뒤집기
list2 = numbers[::-1]
print(list2) # [70, 60, 50, 40, 30, 20, 10]
```

#### 리스트 컴프리헨션
- 리스트를 간결하게 생성, 조작
- 문법 형식: 표현식 for 변수 in 반복가능한 객체 또는 표현식 for 변수 in 반복가능한 객체 if 조건
- 반복가능한 객체: 리스트, 튜플, 딕셔너리, 문자열, 집합, range 객체

```python
# 리스트 생성
# 일반적인 for 반복문 사용
numbers1 = []
for i in range(5):
    numbers1.append(i)
print(numbers) # [0, 1, 2, 3, 4]

# 리스트 컴프리헨션 사용
numbers2 = [i for i in range(5)]
print(numbers2) # [0, 1, 2, 3, 4]

# 원소 조작
numbers3 = [1, 2, 3, 4, 5]
squares = [num ** 2 for num in numbers3]
print(squares) # [1, 4, 9, 16, 25]

# 조건 적용
numbers4 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
even_numbers = [num for num in numbers4 if num % 2 == 0]
print(even_numbers) # [2, 4, 6, 8, 10]
```

#### 딕셔너리 컴프리헨션
- 대상 딕셔너리를 간결하게 생성, 조작
- 리스트의 [] 연산자 대신 딕셔너리의 {} 연산자를 사용
- 문법 형식: {키: 표현식 for 변수 in 반복가능 객체} 또는 {키: 표현식 for 키변수, 값변수 in 딕셔너리.items()}

```python
# 딕셔너리 생성
# 일반적인 for 반복문 사용
squares1 = {}
for i in range(5):
    squares1[i] = i ** 2
print(squares1) # {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}

# 딕셔너리 컴프리헨션 사용
squares2 = {i: i ** 2 for i in range(5)}
print(squares2) # {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}
```

### 2. 문자열 형식 지정
- 데이터 분석 과정에서 특정 형식의 데이터를 출력하거나 변수 값을 포함한 문자열을 생성하는 상황에서 사용

#### C 스타일(%연산자) 포맷팅
- 문법 형식: "형식 지정자를 포함한 문자열" % (변수 리스트)

```python
name = "홍길동"
height = 175.5
print("제 이름은 %s이고 키는 %.1fcm입니다." % (name, height))
```

| 형식 지정자 | 설명 |
| :--- | :--- |
| `%d` | 정수(decimal) 출력 |
| `%i` | 정수(integer) 출력 (%d와 동일) |
| `%o` | 8진수(octal) 출력 |
| `%x` | 16진수(lowercase) 출력 |
| `%X` | 16진수(uppercase) 출력 |
| `%f` | 소수점이 있는 실수(float) 출력 |
| `%.nf`| 소수점 이하 n자리까지 출력 |
| `%c` | 단일 문자 출력 (정수의 ASCII 문자 변환) |
| `%s` | 문자열(string) 출력 |
| `%%` | %문자 자체를 출력 |

#### str.format() 메서드를 이용한 포맷팅
- 중괄호 {}로 표시된 자리 표시자를 사용하여 문자열 내의 특정 위치에 값을 삽입하는 방식
- 문법 형식: "문자열 {위치 또는 이름}".format(인자)

```python
basic_format = "이름: {}, 나이: {}, 월급: {}원'.format(name, age, salary)"
index_format = "직원 {0}의 나이는 {1}세이고, {0}의 세후 월급은 {2}원입니다.".format(name, age, int(salary * (1 - tax_rate)))
keyword_format = "이름: {employee}, 나이: {years}, 월급: {income:,}원, 세금: {tax:.1%}, 실수령액: {net_income:,}원".format(employee = name, years = age, income = salary, tax = tax_rate, net_income = int(salary * (1 - tax_rate)))
```

#### f_문자열 (Formatted String Literal)
- 파이썬 3.6 버전부터 도입
- 문자열 앞에 'f' 또는 'F' 접두사를 붙이고 문자열 내부에 중괄호를 사용하여 변수나 표현식을 표현
- 문법 형식: f"문자열 {표현식}"

```python
basic_format = f"이름: {name}, 나이: {age}, 월급: {salary}원"
index_format = f"직원 {name}의 나이는 {age}세이고, {name}의 세후 월급은 {int(salary * (1 - tax_rate))}원입니다."
keyword_format = f"직원정보: 이름: {name} 나이: {age}세 월급: {salary:,}원 세금: {tax_rate:.1%} 실수령액: {int(salary * (1 - tax_rate)):,}원"
```

### 3. 컨텍스트 관리
#### 리소스의 사용
- 리소스: 파일, 데이터베이스 연결, 네트워크 소켓 등
- 폐기하지 않을 시 메모리 누수나 데이터 손상과 같은 문제 발생
```python
file = open("output.txt", "w")
file.write("Hello, world!\n")
file.close()
```
#### 컨텍스트 관리의 이해
- 자원을 효율적이고 안전하게 사용할 수 있도록 하는 메커니즘
- 자원을 사용 후 명시적으로 폐기해 주어야 하는 자원의 획득과 해제를 자동으로 처리
```python
with open("output.txt", "w") as file:
    file.write("Hello, world!\n")
```
<br>
<br>

## 📅 2025-10-08
### 4. 파이썬 문법 요소
#### 언패킹
- 시퀀스 자료형(리스트, 튜플, 문자열 등)에서 여러 개의 값을 개별 변수에 분리하여 할당하는 기능
- 하나의 데이터 묶음에서 개별 요소들을 추출하여 각각의 변수에 직접 할당
- 문법 형식: 변수₁, ..., 변수ₙ₋₁, 변수ₙ = 시퀀스_객체 또는 변수₁, ..., *변수ₙ₋₁, 변수ₙ = 시퀀스_객체

```python
# 시퀀스 언패킹
rgb = [255, 128, 0]
red, green, blue = rgb
print(f"빨강: {red}, 초록: {green},  파랑: {blue}")

# 확장 언패킹
monthly_sales = [1200, 1300, 1400, 1500, 1600, 1700, 1800]
first, *middle, last = monthly sales
print(f"첫 달 판매액: {first}")
print(f"마지막 달 판매액: {last}")
print(f"중간 달의 판매액: {middle}")
```

#### 언더스코어
- 시퀀스 데이터는 일반적으로 반복문을 사용하여 처리
- 언더스코어(_)는 반복 변수의 값이 필요하지 않을 때 이를 대체하는 역할

```phthon
for _ in range(5):
    print("Hello, Data Analysis with Open Soucre!")

students = [
    (20251234, "김철수", "컴퓨터과학", 2, 3.8),
    (20265678, "이영희", "생활과학부", 3, 4.2),
    (20243456, "박민수", "사회복지학과", 1, 3.5)
]
print("이름과 성적 출력:")
for _, name, _, _, grade in students:
    print(f"{name}의 성적: {grade}")
```

#### 예외처리
- 코드 실행 중 예기치 않은 오류가 발생할 경우에 대비하는 기능이 필요
- 예기치 않은 오류를 예외로 정의

```python
# try-except 문
try:
    number = int(input("숫자를 입력하세요: "))
    result = 10 / number
except ZeroDivisionError:
    print("0으로 나눌 수 없습니다.")
except ValueError:
    print("유효한 숫자를 입력해야 합니다.")

# finally 블록
try:
    file = open("data.csv", "r")
    content = file.read()
    print(content)
except FileNotFoundError:
    print("파일을 찾을 수 없습니다.")
finallly:
    print("파일 작업 종료")
    file.cloas()
```

### 5. 함수형 프로그래밍
- 데이터 변경을 최소화하고 순수함수를 활용하여 부작용을 줄이는 것이 목표
- 순수함수: 같은 입력에 대해 항상 같은 출력을 반환하는 함수
- 부작용: 함수가 단순히 값을 계산하는 것 외에 외부에 영향을 미치는 모든 행위
#### 람다 함수
- 이름이 없는 익명 함수로 한 줄의 표현식으로 작성할 수 있는 간결한 함수
- 즉시 사용할 수 있는 간결한 연산을 수행할 때 적합
- 표현식의 결과는 자동으로 함수의 반환값이 되므로 return 키워드 사용하지 않음
> lambda 매개변수: 표현식

```python
# 일반 함수
def add(x):
    return x + 2
print(add(3))

# 람다 함수
add_lambda = lambda x: x + 2
print(add_lambda(3))

employees = {"이지혜": 300, "구민준": "200", "방서연": 500}
adjust_salary = lambda salary: salary * 1.1
updated_salareis = {name: adjust_salary(salary) for name, salary in employees.items()}
```

#### map, filter, reduce 함수
- 대표적인 함수형 프로그래밍 기법을 사용하는 함수
- 반복문을 사용하지 않고 리스트나 다른 반복 가능한 객체의 요소를 손쉽게 조작할 수 있도록 지원: 데이터 변환, 필터링, 누적 연산을 수행

```python
# map: 반복 가능한 객체의 모든 요소에 특정 함수를 적용하여 새로운 값을 생성하는 함수
# 리스트나 튜플과 같은 자료구조의 요소를 변경할 때 유용
temperature_celsius = [25.6, 27.8, 30.5, 22.3, 28.9, 31.2, 24.7]
celsius_to_fahrenheit = lambda c: (c * 9/5) + 32
temperature_fahrenheit = list(map(celsius_to_fahrenheit, temperature_celsius))
print("섭씨 온도 데이터: ", temperature_celsius)
print("화씨 온도로 변환: ", temperature_fahrenheit)

# filter: 반복 가능한 객체의 요소 중 특정 조건을 만족하는 요소만 남기는 함수
# True 또는 False를 반환하는 함수(조건 함수)를 인자로 받고 조건 함수가 True를 반환하는 요소만 컬렉션에 포함
osda_students = [
    {"name": "김지원", "score": 85},
    {"name": "이민준", "score": 65},
    {"name": "최예은", "score": 78} ]
passed_students = list(filter(lambda student: student["score"] >= 70, osda_students))
print("70점 이상 합격한 학생 목록:")
for student in passed_students:
    print(f"이름: {studnet['name']}, 점수: {student['score']}")

# reduce: 반복 가능한 객체의 모든 요소를 누적하여 하나의 값으로 축소하는 함수
# functools 모듈에서 제공
from functools import reduce
numbers = [1, 2, 3, 4, 5]
total_sum = reduce(lambda x, y: x + y, numbers)
print(total_sum)
```
